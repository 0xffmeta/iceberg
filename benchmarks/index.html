<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://iceberg.apache.org/benchmarks/">
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Benchmarks - Apache Iceberg</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <link href="../css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Available Benchmarks and how to run them", url: "#_top", children: [
          ]},
          {title: "Running Benchmarks on GitHub", url: "#running-benchmarks-on-github", children: [
          ]},
          {title: "Running Benchmarks locally", url: "#running-benchmarks-locally", children: [
              {title: "IcebergSourceNestedListParquetDataWriteBenchmark", url: "#icebergsourcenestedlistparquetdatawritebenchmark" },
              {title: "SparkParquetReadersNestedDataBenchmark", url: "#sparkparquetreadersnesteddatabenchmark" },
              {title: "SparkParquetWritersFlatDataBenchmark", url: "#sparkparquetwritersflatdatabenchmark" },
              {title: "IcebergSourceFlatORCDataReadBenchmark", url: "#icebergsourceflatorcdatareadbenchmark" },
              {title: "SparkParquetReadersFlatDataBenchmark", url: "#sparkparquetreadersflatdatabenchmark" },
              {title: "VectorizedReadDictionaryEncodedFlatParquetDataBenchmark", url: "#vectorizedreaddictionaryencodedflatparquetdatabenchmark" },
              {title: "IcebergSourceNestedListORCDataWriteBenchmark", url: "#icebergsourcenestedlistorcdatawritebenchmark" },
              {title: "VectorizedReadFlatParquetDataBenchmark", url: "#vectorizedreadflatparquetdatabenchmark" },
              {title: "IcebergSourceFlatParquetDataWriteBenchmark", url: "#icebergsourceflatparquetdatawritebenchmark" },
              {title: "IcebergSourceNestedAvroDataReadBenchmark", url: "#icebergsourcenestedavrodatareadbenchmark" },
              {title: "IcebergSourceFlatAvroDataReadBenchmark", url: "#icebergsourceflatavrodatareadbenchmark" },
              {title: "IcebergSourceNestedParquetDataWriteBenchmark", url: "#icebergsourcenestedparquetdatawritebenchmark" },
              {title: "IcebergSourceNestedParquetDataReadBenchmark", url: "#icebergsourcenestedparquetdatareadbenchmark" },
              {title: "IcebergSourceNestedORCDataReadBenchmark", url: "#icebergsourcenestedorcdatareadbenchmark" },
              {title: "IcebergSourceFlatParquetDataReadBenchmark", url: "#icebergsourceflatparquetdatareadbenchmark" },
              {title: "IcebergSourceFlatParquetDataFilterBenchmark", url: "#icebergsourceflatparquetdatafilterbenchmark" },
              {title: "IcebergSourceNestedParquetDataFilterBenchmark", url: "#icebergsourcenestedparquetdatafilterbenchmark" },
              {title: "SparkParquetWritersNestedDataBenchmark", url: "#sparkparquetwritersnesteddatabenchmark" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <!--
  - Licensed to the Apache Software Foundation (ASF) under one
  - or more contributor license agreements.  See the NOTICE file
  - distributed with this work for additional information
  - regarding copyright ownership.  The ASF licenses this file
  - to you under the Apache License, Version 2.0 (the
  - "License"); you may not use this file except in compliance
  - with the License.  You may obtain a copy of the License at
  -
  -   http://www.apache.org/licenses/LICENSE-2.0
  -
  - Unless required by applicable law or agreed to in writing,
  - software distributed under the License is distributed on an
  - "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  - KIND, either express or implied.  See the License for the
  - specific language governing permissions and limitations
  - under the License.
  -->

<h2 id="available-benchmarks-and-how-to-run-them">Available Benchmarks and how to run them<a class="headerlink" href="#available-benchmarks-and-how-to-run-them" title="Permanent link">&para;</a></h2>
<p>Benchmarks are located under <code>&lt;project-name&gt;/jmh</code>. It is generally favorable to only run the tests of interest rather than running all available benchmarks.
Also note that JMH benchmarks run within the same JVM as the system-under-test, so results might vary between runs.</p>
<h2 id="running-benchmarks-on-github">Running Benchmarks on GitHub<a class="headerlink" href="#running-benchmarks-on-github" title="Permanent link">&para;</a></h2>
<p>It is possible to run one or more Benchmarks via the <strong>JMH Benchmarks</strong> GH action on your own fork of the Iceberg repo. This GH action takes the following inputs:
* The repository name where those benchmarks should be run against, such as <code>apache/iceberg</code> or <code>&lt;user&gt;/iceberg</code>
* The branch name to run benchmarks against, such as <code>master</code> or <code>my-cool-feature-branch</code>
* A list of comma-separated double-quoted Benchmark names, such as <code>"IcebergSourceFlatParquetDataReadBenchmark", "IcebergSourceFlatParquetDataFilterBenchmark", "IcebergSourceNestedListParquetDataWriteBenchmark"</code></p>
<p>Benchmark results will be uploaded once <strong>all</strong> benchmarks are done.</p>
<p>It is worth noting that the GH runners have limited resources so the benchmark results should rather be seen as an indicator to guide developers in understanding code changes.
It is likely that there is variability in results across different runs, therefore the benchmark results shouldn&rsquo;t be used to form assumptions around production choices.</p>
<h2 id="running-benchmarks-locally">Running Benchmarks locally<a class="headerlink" href="#running-benchmarks-locally" title="Permanent link">&para;</a></h2>
<p>Below are the existing benchmarks shown with the actual commands on how to run them locally.</p>
<h3 id="icebergsourcenestedlistparquetdatawritebenchmark">IcebergSourceNestedListParquetDataWriteBenchmark<a class="headerlink" href="#icebergsourcenestedlistparquetdatawritebenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of writing nested Parquet data using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedListParquetDataWriteBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-list-parquet-data-write-benchmark-result.txt</code></p>
<h3 id="sparkparquetreadersnesteddatabenchmark">SparkParquetReadersNestedDataBenchmark<a class="headerlink" href="#sparkparquetreadersnesteddatabenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading nested Parquet data using Iceberg and Spark Parquet readers. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=SparkParquetReadersNestedDataBenchmark -PjmhOutputPath=benchmark/spark-parquet-readers-nested-data-benchmark-result.txt</code></p>
<h3 id="sparkparquetwritersflatdatabenchmark">SparkParquetWritersFlatDataBenchmark<a class="headerlink" href="#sparkparquetwritersflatdatabenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of writing Parquet data with a flat schema using Iceberg and Spark Parquet writers. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=SparkParquetWritersFlatDataBenchmark -PjmhOutputPath=benchmark/spark-parquet-writers-flat-data-benchmark-result.txt</code></p>
<h3 id="icebergsourceflatorcdatareadbenchmark">IcebergSourceFlatORCDataReadBenchmark<a class="headerlink" href="#icebergsourceflatorcdatareadbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading ORC data with a flat schema using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceFlatORCDataReadBenchmark -PjmhOutputPath=benchmark/iceberg-source-flat-orc-data-read-benchmark-result.txt</code></p>
<h3 id="sparkparquetreadersflatdatabenchmark">SparkParquetReadersFlatDataBenchmark<a class="headerlink" href="#sparkparquetreadersflatdatabenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading Parquet data with a flat schema using Iceberg and Spark Parquet readers. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=SparkParquetReadersFlatDataBenchmark -PjmhOutputPath=benchmark/spark-parquet-readers-flat-data-benchmark-result.txt</code></p>
<h3 id="vectorizedreaddictionaryencodedflatparquetdatabenchmark">VectorizedReadDictionaryEncodedFlatParquetDataBenchmark<a class="headerlink" href="#vectorizedreaddictionaryencodedflatparquetdatabenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark to compare performance of reading Parquet dictionary encoded data with a flat schema using vectorized Iceberg read path and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=VectorizedReadDictionaryEncodedFlatParquetDataBenchmark -PjmhOutputPath=benchmark/vectorized-read-dict-encoded-flat-parquet-data-result.txt</code></p>
<h3 id="icebergsourcenestedlistorcdatawritebenchmark">IcebergSourceNestedListORCDataWriteBenchmark<a class="headerlink" href="#icebergsourcenestedlistorcdatawritebenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of writing nested Parquet data using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedListORCDataWriteBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-list-orc-data-write-benchmark-result.txt</code></p>
<h3 id="vectorizedreadflatparquetdatabenchmark">VectorizedReadFlatParquetDataBenchmark<a class="headerlink" href="#vectorizedreadflatparquetdatabenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark to compare performance of reading Parquet data with a flat schema using vectorized Iceberg read path and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=VectorizedReadFlatParquetDataBenchmark -PjmhOutputPath=benchmark/vectorized-read-flat-parquet-data-result.txt</code></p>
<h3 id="icebergsourceflatparquetdatawritebenchmark">IcebergSourceFlatParquetDataWriteBenchmark<a class="headerlink" href="#icebergsourceflatparquetdatawritebenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of writing Parquet data with a flat schema using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceFlatParquetDataWriteBenchmark -PjmhOutputPath=benchmark/iceberg-source-flat-parquet-data-write-benchmark-result.txt</code></p>
<h3 id="icebergsourcenestedavrodatareadbenchmark">IcebergSourceNestedAvroDataReadBenchmark<a class="headerlink" href="#icebergsourcenestedavrodatareadbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading Avro data with a flat schema using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedAvroDataReadBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-avro-data-read-benchmark-result.txt</code></p>
<h3 id="icebergsourceflatavrodatareadbenchmark">IcebergSourceFlatAvroDataReadBenchmark<a class="headerlink" href="#icebergsourceflatavrodatareadbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading Avro data with a flat schema using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceFlatAvroDataReadBenchmark -PjmhOutputPath=benchmark/iceberg-source-flat-avro-data-read-benchmark-result.txt</code></p>
<h3 id="icebergsourcenestedparquetdatawritebenchmark">IcebergSourceNestedParquetDataWriteBenchmark<a class="headerlink" href="#icebergsourcenestedparquetdatawritebenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of writing nested Parquet data using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedParquetDataWriteBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-parquet-data-write-benchmark-result.txt</code></p>
<h3 id="icebergsourcenestedparquetdatareadbenchmark">IcebergSourceNestedParquetDataReadBenchmark<a class="headerlink" href="#icebergsourcenestedparquetdatareadbenchmark" title="Permanent link">&para;</a></h3>
<ul>
<li>A benchmark that evaluates the performance of reading nested Parquet data using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</li>
</ul>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedParquetDataReadBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-parquet-data-read-benchmark-result.txt</code></p>
<h3 id="icebergsourcenestedorcdatareadbenchmark">IcebergSourceNestedORCDataReadBenchmark<a class="headerlink" href="#icebergsourcenestedorcdatareadbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading ORC data with a flat schema using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedORCDataReadBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-orc-data-read-benchmark-result.txt</code></p>
<h3 id="icebergsourceflatparquetdatareadbenchmark">IcebergSourceFlatParquetDataReadBenchmark<a class="headerlink" href="#icebergsourceflatparquetdatareadbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the performance of reading Parquet data with a flat schema using Iceberg and the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceFlatParquetDataReadBenchmark -PjmhOutputPath=benchmark/iceberg-source-flat-parquet-data-read-benchmark-result.txt</code></p>
<h3 id="icebergsourceflatparquetdatafilterbenchmark">IcebergSourceFlatParquetDataFilterBenchmark<a class="headerlink" href="#icebergsourceflatparquetdatafilterbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the file skipping capabilities in the Spark data source for Iceberg. This class uses a dataset with a flat schema, where the records are clustered according to the
column used in the filter predicate. The performance is compared to the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:</p>
<p><code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceFlatParquetDataFilterBenchmark -PjmhOutputPath=benchmark/iceberg-source-flat-parquet-data-filter-benchmark-result.txt</code></p>
<h3 id="icebergsourcenestedparquetdatafilterbenchmark">IcebergSourceNestedParquetDataFilterBenchmark<a class="headerlink" href="#icebergsourcenestedparquetdatafilterbenchmark" title="Permanent link">&para;</a></h3>
<p>A benchmark that evaluates the file skipping capabilities in the Spark data source for Iceberg. This class uses a dataset with nested data, where the records are clustered according to the
column used in the filter predicate. The performance is compared to the built-in file source in Spark. To run this benchmark for either spark-2 or spark-3:
<code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=IcebergSourceNestedParquetDataFilterBenchmark -PjmhOutputPath=benchmark/iceberg-source-nested-parquet-data-filter-benchmark-result.txt</code></p>
<h3 id="sparkparquetwritersnesteddatabenchmark">SparkParquetWritersNestedDataBenchmark<a class="headerlink" href="#sparkparquetwritersnesteddatabenchmark" title="Permanent link">&para;</a></h3>
<ul>
<li>A benchmark that evaluates the performance of writing nested Parquet data using Iceberg and Spark Parquet writers. To run this benchmark for either spark-2 or spark-3:
  <code>./gradlew :iceberg-spark:iceberg-spark[2|3]:jmh -PjmhIncludeRegex=SparkParquetWritersNestedDataBenchmark -PjmhOutputPath=benchmark/spark-parquet-writers-nested-data-benchmark-result.txt</code></li>
</ul>

  <br>
</div>

<footer class="container-fluid wm-page-content"><p>Copyright 2018-2021 <a href='https://www.apache.org/'>The Apache Software Foundation</a><br />Apache Iceberg, Iceberg, Apache, the Apache feather logo, and the Apache Iceberg project logo are either registered<br />trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>